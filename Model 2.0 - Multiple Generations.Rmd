---
title: "Model 2.0 - Multi-generational Multilingualism"
author: "Amy Anderson"
date: "2024-05-15"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```



```{r, message=FALSE, echo=FALSE, include=FALSE}
### Load libraries
library(tidyverse)
library(cowplot)



### Load bespoke functions

## create character vector of all file names inside the 'Functions' folder
# specify function to generate agent IDs first -- this function is called in the 'Example Use' section of some other function files, and that will cause issues if it isn't loaded into the workspace before the files that use it.
first_function <- "./Functions//Generate Agent IDs.R"
function_files <- list.files(path="./Functions/", full.names=TRUE) # all file names in Function folder
function_files <- function_files[which(function_files != "./Functions//Generate Agent IDs.R")] # remove the agent ID function
function_files <- c(first_function, function_files) # put it back in as the first item in the list of names. 


# apply the source() command to all Function file names them to pull the functions into the working environment. 
sapply(function_files, FUN=source) 

```


 - Designate languages in play. 
```{r}
languages <- choose_languages(3)
```


 - Generate a starting set of agents, and their age structure:
```{r}
agent_census <- data.frame(agent_id = sapply(seq(from = 0, length.out = 1000), FUN = generate_agent_id))

# uniform age structure
agent_census$age <- sample(0:80, 1000, replace = TRUE)

# alternate assigning male and female state for each agent. 
agent_census$female <- rep(c(0,1), nrow(agent_census)/2)

# create empty variable for spouse ID
agent_census$spouse_id <- NA

# create columns to language proficiency variables
agent_languages <- as.data.frame(sapply(languages, function(lang) vector(mode = "list", length = nrow(agent_census))))
names(agent_languages) <- languages


agent_census <- cbind(agent_census, agent_languages)
```


Pair up males/females for reproductive partnerships: 
```{r}

test <- select_marriage_partners(agent_census, calculate_dyad_score = calc_dyad_age_similarity)


```


Generate new births in existing partnerships. Assign traits to newborn agents. 
```{r}
# sow()...
```


Pick conversation partners for the year.
```{r}
# meetup()
```


Learn languages from each other.
```{r}
# converse()
```


Calculate annual deaths.
```{r}
reap()
```



Repeat all of this living for the next value of time t.
